<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net" modified="2024-01-01T00:00:00.000Z" agent="5.0" etag="example" version="22.1.16">
  <diagram id="database-schema" name="Database Schema">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Row 1: Core Tables -->
        
        <!-- Employees Table (Center) -->
        <mxCell id="employees-table" value="&lt;b&gt;employees&lt;/b&gt;&lt;hr&gt;id: serial&lt;br&gt;employee_id: character varying(20)&lt;br&gt;first_name: text&lt;br&gt;last_name: text&lt;br&gt;email: text&lt;br&gt;phone: text&lt;br&gt;department_id: integer&lt;br&gt;position: text&lt;br&gt;status: employee_status&lt;br&gt;face_descriptor: text&lt;br&gt;join_date: date&lt;br&gt;created_at: timestamp with timezone&lt;br&gt;updated_at: timestamp with timezone" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="650" y="300" width="300" height="320" as="geometry" />
        </mxCell>

        <!-- Departments Table -->
        <mxCell id="departments-table" value="&lt;b&gt;departments&lt;/b&gt;&lt;hr&gt;id: serial&lt;br&gt;name: text&lt;br&gt;description: text&lt;br&gt;manager_id: integer&lt;br&gt;created_at: timestamp with timezone" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="650" y="50" width="300" height="140" as="geometry" />
        </mxCell>

        <!-- Users Table -->
        <mxCell id="users-table" value="&lt;b&gt;users&lt;/b&gt;&lt;hr&gt;id: serial&lt;br&gt;username: text&lt;br&gt;password: text&lt;br&gt;role: text&lt;br&gt;created_at: timestamp with timezone&lt;br&gt;employee_id: integer&lt;br&gt;full_name: text" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="1050" y="300" width="280" height="180" as="geometry" />
        </mxCell>

        <!-- Row 2: Time & Attendance Tables -->
        
        <!-- Time Logs Table -->
        <mxCell id="time-logs-table" value="&lt;b&gt;time_logs&lt;/b&gt;&lt;hr&gt;id: serial&lt;br&gt;employee_id: integer&lt;br&gt;log_time: timestamp without timezone&lt;br&gt;type: text&lt;br&gt;source: text" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="50" y="300" width="280" height="140" as="geometry" />
        </mxCell>

        <!-- Work Hours Table -->
        <mxCell id="work-hours-table" value="&lt;b&gt;work_hours&lt;/b&gt;&lt;hr&gt;id: serial&lt;br&gt;employee_id: integer&lt;br&gt;work_date: date&lt;br&gt;first_checkin: timestamp without timezone&lt;br&gt;last_checkout: timestamp without timezone&lt;br&gt;regular_hours: numeric(5,2)&lt;br&gt;ot_hours: numeric(5,2)&lt;br&gt;status: text" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="1050" y="50" width="300" height="200" as="geometry" />
        </mxCell>

        <!-- Attendance Summary Table -->
        <mxCell id="attendance-summary-table" value="&lt;b&gt;attendance_summary&lt;/b&gt;&lt;hr&gt;id: serial&lt;br&gt;employee_id: integer&lt;br&gt;month: integer&lt;br&gt;year: integer&lt;br&gt;total_hours: numeric(5,2)&lt;br&gt;overtime_hours: numeric(5,2)&lt;br&gt;leave_days: integer&lt;br&gt;created_at: timestamp with timezone&lt;br&gt;early_minutes: integer&lt;br&gt;late_minutes: integer&lt;br&gt;penalty_amount: numeric(10,2)" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="50" y="480" width="280" height="260" as="geometry" />
        </mxCell>

        <!-- Row 3: Recognition & Security Tables -->
        
        <!-- Face Recognition Logs Table -->
        <mxCell id="face-recognition-logs-table" value="&lt;b&gt;face_recognition_logs&lt;/b&gt;&lt;hr&gt;id: serial&lt;br&gt;employee_id: integer&lt;br&gt;timestamp: timestamp with timezone&lt;br&gt;success: boolean&lt;br&gt;confidence_score: numeric(5,2)&lt;br&gt;image_path: text&lt;br&gt;error_message: text" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="50" y="50" width="280" height="180" as="geometry" />
        </mxCell>

        <!-- Face Data Table -->
        <mxCell id="face-data-table" value="&lt;b&gt;face_data&lt;/b&gt;&lt;hr&gt;id: serial&lt;br&gt;employee_id: integer&lt;br&gt;descriptor: text&lt;br&gt;quality: numeric(5,2)&lt;br&gt;created_at: timestamp with timezone&lt;br&gt;updated_at: timestamp with timezone&lt;br&gt;is_active: boolean" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="360" y="50" width="260" height="180" as="geometry" />
        </mxCell>

        <!-- Session Table -->
        <mxCell id="session-table" value="&lt;b&gt;session&lt;/b&gt;&lt;hr&gt;sid: character varying&lt;br&gt;sess: json&lt;br&gt;expire: timestamp without time zone" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="360" y="280" width="260" height="100" as="geometry" />
        </mxCell>

        <!-- Row 4: Leave & Notifications -->
        
        <!-- Leave Requests Table -->
        <mxCell id="leave-requests-table" value="&lt;b&gt;leave_requests&lt;/b&gt;&lt;hr&gt;id: serial&lt;br&gt;employee_id: integer&lt;br&gt;start_date: date&lt;br&gt;end_date: date&lt;br&gt;type: leave_request_type&lt;br&gt;reason: text&lt;br&gt;status: leave_request_status&lt;br&gt;approved_by_id: integer&lt;br&gt;approved_at: timestamp with timezone&lt;br&gt;created_at: timestamp with timezone&lt;br&gt;updated_at: timestamp with timezone" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="650" y="680" width="300" height="260" as="geometry" />
        </mxCell>

        <!-- Notifications Table -->
        <mxCell id="notifications-table" value="&lt;b&gt;notifications&lt;/b&gt;&lt;hr&gt;id: serial&lt;br&gt;employee_id: integer&lt;br&gt;title: text&lt;br&gt;message: text&lt;br&gt;type: text&lt;br&gt;read: boolean&lt;br&gt;created_at: timestamp with timezone&lt;br&gt;updated_at: timestamp with timezone" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="1050" y="520" width="300" height="200" as="geometry" />
        </mxCell>

        <!-- Holidays Table -->
        <mxCell id="holidays-table" value="&lt;b&gt;holidays&lt;/b&gt;&lt;hr&gt;id: serial&lt;br&gt;name: character varying(100)&lt;br&gt;date: date&lt;br&gt;description: text&lt;br&gt;created_at: timestamp with timezone" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="1050" y="760" width="300" height="140" as="geometry" />
        </mxCell>

        <!-- Row 5: Cache Tables -->
        
        <!-- Cached Work Hours Table -->
        <mxCell id="cached-work-hours-table" value="&lt;b&gt;cached_work_hours&lt;/b&gt;&lt;hr&gt;id: serial&lt;br&gt;employee_id: integer&lt;br&gt;date: date&lt;br&gt;regular_hours: numeric(5,2)&lt;br&gt;overtime_hours: numeric(5,2)&lt;br&gt;regular_hours_formatted: text&lt;br&gt;overtime_hours_formatted: text&lt;br&gt;total_hours_formatted: text&lt;br&gt;checkin_time: timestamp&lt;br&gt;checkout_time: timestamp&lt;br&gt;created_at: timestamp with timezone&lt;br&gt;updated_at: timestamp with timezone" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="360" y="420" width="260" height="280" as="geometry" />
        </mxCell>

        <!-- Relationships -->
        
        <!-- Face Recognition Logs -> Employees -->
        <mxCell id="rel1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=ERone;endFill=0;startArrow=ERmany;startFill=0;" edge="1" parent="1" source="face-recognition-logs-table" target="employees-table">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Time Logs -> Employees -->
        <mxCell id="rel2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=ERone;endFill=0;startArrow=ERmany;startFill=0;" edge="1" parent="1" source="time-logs-table" target="employees-table">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Attendance Summary -> Employees -->
        <mxCell id="rel3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=ERone;endFill=0;startArrow=ERmany;startFill=0;" edge="1" parent="1" source="attendance-summary-table" target="employees-table">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Employees -> Departments -->
        <mxCell id="rel4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=ERone;endFill=0;startArrow=ERmany;startFill=0;" edge="1" parent="1" source="employees-table" target="departments-table">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Users -> Employees -->
        <mxCell id="rel5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=ERone;endFill=0;startArrow=ERone;startFill=0;" edge="1" parent="1" source="users-table" target="employees-table">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Departments -> Users (Manager) -->
        <mxCell id="rel6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=ERone;endFill=0;startArrow=ERmany;startFill=0;" edge="1" parent="1" source="departments-table" target="users-table">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Leave Requests -> Employees -->
        <mxCell id="rel7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=ERone;endFill=0;startArrow=ERmany;startFill=0;" edge="1" parent="1" source="leave-requests-table" target="employees-table">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Leave Requests -> Users (Approved By) -->
        <mxCell id="rel8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=ERone;endFill=0;startArrow=ERmany;startFill=0;" edge="1" parent="1" source="leave-requests-table" target="users-table">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Work Hours -> Employees -->
        <mxCell id="rel9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=ERone;endFill=0;startArrow=ERmany;startFill=0;" edge="1" parent="1" source="work-hours-table" target="employees-table">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Face Data -> Employees -->
        <mxCell id="rel10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=ERone;endFill=0;startArrow=ERmany;startFill=0;" edge="1" parent="1" source="face-data-table" target="employees-table">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Cached Work Hours -> Employees -->
        <mxCell id="rel11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=ERone;endFill=0;startArrow=ERmany;startFill=0;" edge="1" parent="1" source="cached-work-hours-table" target="employees-table">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Notifications -> Employees -->
        <mxCell id="rel12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=ERone;endFill=0;startArrow=ERmany;startFill=0;" edge="1" parent="1" source="notifications-table" target="employees-table">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile> 